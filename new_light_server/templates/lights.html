<!doctype html>
<head>
<title>Lights</title>
<script type="text/javascript" src='static/jscolor/jscolor.js'></script>
<script type="text/javascript">
function updateColor(name,button) {
    var cb = document.getElementById(name+"_check");
    if (!cb || !cb.checked) {
        return;
    }
    var in1=document.getElementById(name+"_color");
    if (button.valueElement.id == name+"_color2") {
        in1.color.fromString(button.toString());
    } else {
        var in2=document.getElementById(name+"_color2");
        in2.color.fromString(in1.value);
    }
}
</script>
</head>
<body bgcolor=black text='gray'>
<form>
<table>
{% for key in nodes.keys() -%}
{% set node = nodes[key] -%}
<tr><td>{{ node.name }}</td>
    <td><input class="color {onImmediateChange:'updateColor(\'{{node.name}}\', this);'}" id="{{ node.name }}_color" name="{{ node.name }}_color" value="{{ node.colorvalue }}" onChange='document.forms[0].submit();'></td>
    <td><input type='checkbox' id="{{ node.name }}_check" checked onchange='updateColor(\'{{node.name}}\',this);'></td>
    <td><input class="color { onImmediateChange:'updateColor(\'{{node.name}}\',this);'}" id="{{ node.name }}_color2" name="{{ node.name }}_color2" value="{{ node.colorvalue2 }}" onChange='document.forms[0].submit();'></td>
    <td>{{ node.string_address }}</td></tr>
{% endfor -%}
</table>
</form>
</body>

